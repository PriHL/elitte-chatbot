<script>
  async function showContacts(grupo) {
    const container = document.getElementById("contactList");
    container.innerHTML = `<h2>Contatos - Grupo ${grupo}</h2>`;

    try {
      // Carrega os contatos do grupo via planilha do Google Sheets
      const contacts = await loadContacts(grupo);

      if (!contacts.length) {
        container.innerHTML += "<p>Nenhum contato encontrado.</p>";
        return;
      }

      contacts.forEach(contact => {
        // Cria um card para cada contato
        const card = document.createElement("div");
        card.className = "card";

        const info = document.createElement("div");
        info.innerHTML = `
          <strong>@${contact.Username || contact.username}</strong><br/>
          Status: <span class="status ${
            contact.Status === 'Enviado' ? 'enviado' : 'nao_enviado'
          }">${contact.Status || 'Não enviado'}</span>
        `;

        const actions = document.createElement("div");

        if (contact.Status !== 'Enviado') {
          const sendBtn = document.createElement("button");
          sendBtn.textContent = "Enviar Mensagem";
          sendBtn.className = "btn btn-blue";
          sendBtn.onclick = () => alert(`Mensagem enviada para @${contact.Username}`);

          actions.appendChild(sendBtn);
        }

        card.appendChild(info);
        card.appendChild(actions);
        container.appendChild(card);
      });

    } catch (error) {
      console.error('Erro ao carregar contatos:', error);
      container.innerHTML += "<p>Erro ao carregar contatos. Tente novamente mais tarde.</p>";
    }
  }

  window.onload = () => {
    showContacts('A'); // Mostra contatos do Grupo A por padrão
  };
</script>
